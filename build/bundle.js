!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function i(){return Object.create(null)}function o(t){t.forEach(n)}function r(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(t,n,i,o){return t[1]&&o?e(i.ctx.slice(),t[1](o(n))):i.ctx}function c(t,e,n,i,o,r,s){const c=function(t,e,n,i){if(t[2]&&i){const o=t[2](i(n));if(void 0===e.dirty)return o;if("object"==typeof o){const t=[],n=Math.max(e.dirty.length,o.length);for(let i=0;i<n;i+=1)t[i]=e.dirty[i]|o[i];return t}return e.dirty|o}return e.dirty}(e,i,o,r);if(c){const o=a(e,n,i,s);t.p(o,c)}}function u(t){const e={};for(const n in t)"$"!==n[0]&&(e[n]=t[n]);return e}function l(t,e){t.appendChild(e)}function p(t,e,n){t.insertBefore(e,n||null)}function d(t){t.parentNode.removeChild(t)}function f(t){return document.createElement(t)}function m(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function h(t){return document.createTextNode(t)}function v(){return h("")}function y(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function g(t,e,n,i){t.style.setProperty(e,n,i?"important":"")}let _;function $(t){_=t}const N=[],b=[],E=[],x=[],w=Promise.resolve();let C=!1;function L(t){E.push(t)}let k=!1;const O=new Set;function T(){if(!k){k=!0;do{for(let t=0;t<N.length;t+=1){const e=N[t];$(e),A(e.$$)}for($(null),N.length=0;b.length;)b.pop()();for(let t=0;t<E.length;t+=1){const e=E[t];O.has(e)||(O.add(e),e())}E.length=0}while(N.length);for(;x.length;)x.pop()();C=!1,k=!1,O.clear()}}function A(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(L)}}const M=new Set;let P;function I(){P={r:0,c:[],p:P}}function H(){P.r||o(P.c),P=P.p}function S(t,e){t&&t.i&&(M.delete(t),t.i(e))}function z(t,e,n,i){if(t&&t.o){if(M.has(t))return;M.add(t),P.c.push((()=>{M.delete(t),i&&(n&&t.d(1),i())})),t.o(e)}}function j(t){t&&t.c()}function F(t,e,i){const{fragment:s,on_mount:a,on_destroy:c,after_update:u}=t.$$;s&&s.m(e,i),L((()=>{const e=a.map(n).filter(r);c?c.push(...e):o(e),t.$$.on_mount=[]})),u.forEach(L)}function R(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function X(t,e){-1===t.$$.dirty[0]&&(N.push(t),C||(C=!0,w.then(T)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function B(e,n,r,s,a,c,u=[-1]){const l=_;$(e);const p=n.props||{},f=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:a,bound:i(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:[]),callbacks:i(),dirty:u,skip_bound:!1};let m=!1;if(f.ctx=r?r(e,p,((t,n,...i)=>{const o=i.length?i[0]:n;return f.ctx&&a(f.ctx[t],f.ctx[t]=o)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](o),m&&X(e,t)),n})):[],f.update(),m=!0,o(f.before_update),f.fragment=!!s&&s(f.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);f.fragment&&f.fragment.l(t),t.forEach(d)}else f.fragment&&f.fragment.c();n.intro&&S(e.$$.fragment),F(e,n.target,n.anchor),T()}$(l)}class q{$destroy(){R(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var D,U=function(){return(U=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Y=function(){function t(t){this.options=t,this.listeners={}}return t.prototype.on=function(t,e){var n=this.listeners[t]||[];this.listeners[t]=n.concat([e])},t.prototype.triggerEvent=function(t,e){var n=this;(this.listeners[t]||[]).forEach((function(t){return t({target:n,event:e})}))},t}();!function(t){t[t.Add=0]="Add",t[t.Remove=1]="Remove"}(D||(D={}));var J,K=function(){function t(){this.notifications=[]}return t.prototype.push=function(t){this.notifications.push(t),this.updateFn(t,D.Add,this.notifications)},t.prototype.splice=function(t,e){var n=this.notifications.splice(t,e)[0];return this.updateFn(n,D.Remove,this.notifications),n},t.prototype.indexOf=function(t){return this.notifications.indexOf(t)},t.prototype.onUpdate=function(t){this.updateFn=t},t}();!function(t){t.Dismiss="dismiss",t.Click="click"}(J||(J={}));var W={types:[{type:"success",className:"notyf__toast--success",backgroundColor:"#3dc763",icon:{className:"notyf__icon--success",tagName:"i"}},{type:"error",className:"notyf__toast--error",backgroundColor:"#ed3d3d",icon:{className:"notyf__icon--error",tagName:"i"}}],duration:2e3,ripple:!0,position:{x:"right",y:"bottom"},dismissible:!1},G=function(){function t(){this.notifications=[],this.events={},this.X_POSITION_FLEX_MAP={left:"flex-start",center:"center",right:"flex-end"},this.Y_POSITION_FLEX_MAP={top:"flex-start",center:"center",bottom:"flex-end"};var t=document.createDocumentFragment(),e=this._createHTLMElement({tagName:"div",className:"notyf"});t.appendChild(e),document.body.appendChild(t),this.container=e,this.animationEndEventName=this._getAnimationEndEventName(),this._createA11yContainer()}return t.prototype.on=function(t,e){var n;this.events=U(U({},this.events),((n={})[t]=e,n))},t.prototype.update=function(t,e){e===D.Add?this.addNotification(t):e===D.Remove&&this.removeNotification(t)},t.prototype.removeNotification=function(t){var e,n,i=this,o=this._popRenderedNotification(t);o&&((e=o.node).classList.add("notyf__toast--disappear"),e.addEventListener(this.animationEndEventName,n=function(t){t.target===e&&(e.removeEventListener(i.animationEndEventName,n),i.container.removeChild(e))}))},t.prototype.addNotification=function(t){var e=this._renderNotification(t);this.notifications.push({notification:t,node:e}),this._announce(t.options.message||"Notification")},t.prototype._renderNotification=function(t){var e,n=this._buildNotificationCard(t),i=t.options.className;return i&&(e=n.classList).add.apply(e,i.split(" ")),this.container.appendChild(n),n},t.prototype._popRenderedNotification=function(t){for(var e=-1,n=0;n<this.notifications.length&&e<0;n++)this.notifications[n].notification===t&&(e=n);if(-1!==e)return this.notifications.splice(e,1)[0]},t.prototype.getXPosition=function(t){var e;return(null===(e=null==t?void 0:t.position)||void 0===e?void 0:e.x)||"right"},t.prototype.getYPosition=function(t){var e;return(null===(e=null==t?void 0:t.position)||void 0===e?void 0:e.y)||"bottom"},t.prototype.adjustContainerAlignment=function(t){var e=this.X_POSITION_FLEX_MAP[this.getXPosition(t)],n=this.Y_POSITION_FLEX_MAP[this.getYPosition(t)],i=this.container.style;i.setProperty("justify-content",n),i.setProperty("align-items",e)},t.prototype._buildNotificationCard=function(t){var e,n=this,i=t.options,o=i.icon;this.adjustContainerAlignment(i);var r=this._createHTLMElement({tagName:"div",className:"notyf__toast"}),s=this._createHTLMElement({tagName:"div",className:"notyf__ripple"}),a=this._createHTLMElement({tagName:"div",className:"notyf__wrapper"}),c=this._createHTLMElement({tagName:"div",className:"notyf__message"});c.innerHTML=i.message||"";var u=i.background||i.backgroundColor;if(o&&"object"==typeof o){var l=this._createHTLMElement({tagName:"div",className:"notyf__icon"}),p=this._createHTLMElement({tagName:o.tagName||"i",className:o.className,text:o.text}),d=null!==(e=o.color)&&void 0!==e?e:u;d&&(p.style.color=d),l.appendChild(p),a.appendChild(l)}if(a.appendChild(c),r.appendChild(a),u&&(i.ripple?(s.style.background=u,r.appendChild(s)):r.style.background=u),i.dismissible){var f=this._createHTLMElement({tagName:"div",className:"notyf__dismiss"}),m=this._createHTLMElement({tagName:"button",className:"notyf__dismiss-btn"});f.appendChild(m),a.appendChild(f),r.classList.add("notyf__toast--dismissible"),m.addEventListener("click",(function(e){var i,o;null===(o=(i=n.events)[J.Dismiss])||void 0===o||o.call(i,{target:t,event:e}),e.stopPropagation()}))}r.addEventListener("click",(function(e){var i,o;return null===(o=(i=n.events)[J.Click])||void 0===o?void 0:o.call(i,{target:t,event:e})}));var h="top"===this.getYPosition(i)?"upper":"lower";return r.classList.add("notyf__toast--"+h),r},t.prototype._createHTLMElement=function(t){var e=t.tagName,n=t.className,i=t.text,o=document.createElement(e);return n&&(o.className=n),o.textContent=i||null,o},t.prototype._createA11yContainer=function(){var t=this._createHTLMElement({tagName:"div",className:"notyf-announcer"});t.setAttribute("aria-atomic","true"),t.setAttribute("aria-live","polite"),t.style.border="0",t.style.clip="rect(0 0 0 0)",t.style.height="1px",t.style.margin="-1px",t.style.overflow="hidden",t.style.padding="0",t.style.position="absolute",t.style.width="1px",t.style.outline="0",document.body.appendChild(t),this.a11yContainer=t},t.prototype._announce=function(t){var e=this;this.a11yContainer.textContent="",setTimeout((function(){e.a11yContainer.textContent=t}),100)},t.prototype._getAnimationEndEventName=function(){var t,e=document.createElement("_fake"),n={MozTransition:"animationend",OTransition:"oAnimationEnd",WebkitTransition:"webkitAnimationEnd",transition:"animationend"};for(t in n)if(void 0!==e.style[t])return n[t];return"animationend"},t}(),Q=function(){function t(t){var e=this;this.dismiss=this._removeNotification,this.notifications=new K,this.view=new G;var n=this.registerTypes(t);this.options=U(U({},W),t),this.options.types=n,this.notifications.onUpdate((function(t,n){return e.view.update(t,n)})),this.view.on(J.Dismiss,(function(t){var n=t.target,i=t.event;e._removeNotification(n),n.triggerEvent(J.Dismiss,i)})),this.view.on(J.Click,(function(t){var e=t.target,n=t.event;return e.triggerEvent(J.Click,n)}))}return t.prototype.error=function(t){var e=this.normalizeOptions("error",t);return this.open(e)},t.prototype.success=function(t){var e=this.normalizeOptions("success",t);return this.open(e)},t.prototype.open=function(t){var e=this.options.types.find((function(e){return e.type===t.type}))||{},n=U(U({},e),t);this.assignProps(["ripple","position","dismissible"],n);var i=new Y(n);return this._pushNotification(i),i},t.prototype.dismissAll=function(){for(;this.notifications.splice(0,1););},t.prototype.assignProps=function(t,e){var n=this;t.forEach((function(t){e[t]=null==e[t]?n.options[t]:e[t]}))},t.prototype._pushNotification=function(t){var e=this;this.notifications.push(t);var n=void 0!==t.options.duration?t.options.duration:this.options.duration;n&&setTimeout((function(){return e._removeNotification(t)}),n)},t.prototype._removeNotification=function(t){var e=this.notifications.indexOf(t);-1!==e&&this.notifications.splice(e,1)},t.prototype.normalizeOptions=function(t,e){var n={type:t};return"string"==typeof e?n.message=e:"object"==typeof e&&(n=U(U({},n),e)),n},t.prototype.registerTypes=function(t){var e=(t&&t.types||[]).slice();return W.types.map((function(t){var n=-1;e.forEach((function(e,i){e.type===t.type&&(n=i)}));var i=-1!==n?e.splice(n,1)[0]:{};return U(U({},t),i)})).concat(e)},t}();function V(t){let e,n;return{c(){e=m("title"),n=h(t[0])},m(t,i){p(t,e,i),l(e,n)},p(t,e){1&e&&function(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}(n,t[0])},d(t){t&&d(e)}}}function Z(t){let e,n,i,o=t[0]&&V(t);const r=t[3].default,s=function(t,e,n,i){if(t){const o=a(t,e,n,i);return t[0](o)}}(r,t,t[2],null);return{c(){e=m("svg"),o&&o.c(),n=v(),s&&s.c(),y(e,"xmlns","http://www.w3.org/2000/svg"),y(e,"viewBox",t[1]),y(e,"class","svelte-c8tyih")},m(t,r){p(t,e,r),o&&o.m(e,null),l(e,n),s&&s.m(e,null),i=!0},p(t,[a]){t[0]?o?o.p(t,a):(o=V(t),o.c(),o.m(e,n)):o&&(o.d(1),o=null),s&&s.p&&4&a&&c(s,r,t,t[2],a,null,null),(!i||2&a)&&y(e,"viewBox",t[1])},i(t){i||(S(s,t),i=!0)},o(t){z(s,t),i=!1},d(t){t&&d(e),o&&o.d(),s&&s.d(t)}}}function tt(t,e,n){let{$$slots:i={},$$scope:o}=e,{title:r=null}=e,{viewBox:s}=e;return t.$$set=t=>{"title"in t&&n(0,r=t.title),"viewBox"in t&&n(1,s=t.viewBox),"$$scope"in t&&n(2,o=t.$$scope)},[r,s,o,i]}class et extends q{constructor(t){super(),B(this,t,tt,Z,s,{title:0,viewBox:1})}}function nt(t){let e;return{c(){e=m("path"),y(e,"d","M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z")},m(t,n){p(t,e,n)},d(t){t&&d(e)}}}function it(t){let n,i;const o=[{viewBox:"0 0 24 24"},t[0]];let r={$$slots:{default:[nt]},$$scope:{ctx:t}};for(let t=0;t<o.length;t+=1)r=e(r,o[t]);return n=new et({props:r}),{c(){j(n.$$.fragment)},m(t,e){F(n,t,e),i=!0},p(t,[e]){const i=1&e?function(t,e){const n={},i={},o={$$scope:1};let r=t.length;for(;r--;){const s=t[r],a=e[r];if(a){for(const t in s)t in a||(i[t]=1);for(const t in a)o[t]||(n[t]=a[t],o[t]=1);t[r]=a}else for(const t in s)o[t]=1}for(const t in i)t in n||(n[t]=void 0);return n}(o,[o[0],(r=t[0],"object"==typeof r&&null!==r?r:{})]):{};var r;2&e&&(i.$$scope={dirty:e,ctx:t}),n.$set(i)},i(t){i||(S(n.$$.fragment,t),i=!0)},o(t){z(n.$$.fragment,t),i=!1},d(t){R(n,t)}}}function ot(t,n,i){return t.$$set=t=>{i(0,n=e(e({},n),u(t)))},[n=u(n)]}class rt extends q{constructor(t){super(),B(this,t,ot,it,s,{})}}function st(e){let n,i;return{c(){n=f("div"),i=f("div"),y(i,"class","shadow svelte-158kb8g"),y(n,"class","wrapper svelte-158kb8g"),g(n,"--size",e[0]+e[2]),g(n,"--color",e[1])},m(t,e){p(t,n,e),l(n,i)},p(t,[e]){5&e&&g(n,"--size",t[0]+t[2]),2&e&&g(n,"--color",t[1])},i:t,o:t,d(t){t&&d(n)}}}function at(t,e,n){let{size:i=60}=e,{color:o="#FF3E00"}=e,{unit:r="px"}=e;return t.$$set=t=>{"size"in t&&n(0,i=t.size),"color"in t&&n(1,o=t.color),"unit"in t&&n(2,r=t.unit)},[i,o,r]}class ct extends q{constructor(t){super(),B(this,t,at,st,s,{size:0,color:1,unit:2})}}function ut(t){let e,n,i,o,r,s,a,c,u,m;const v=[pt,lt],g=[];function _(t,e){return t[1]?0:1}return o=_(t),r=g[o]=v[o](t),{c(){e=f("div"),n=f("button"),i=f("div"),r.c(),s=h(" "),a=f("div"),a.textContent="Upload to Clipia",y(i,"class","button svelte-141u0f5"),y(n,"class","button-container svelte-141u0f5"),y(e,"class","container svelte-141u0f5")},m(r,d){var f,h,v,y,_;p(r,e,d),l(e,n),l(n,i),g[o].m(i,null),l(n,s),l(n,a),c=!0,u||(f=n,h="click",v=function(t){return function(e){return e.stopPropagation(),t.call(this,e)}}((_=t[2],function(t){return t.preventDefault(),_.call(this,t)})),f.addEventListener(h,v,y),m=()=>f.removeEventListener(h,v,y),u=!0)},p(t,e){let n=o;o=_(t),o!==n&&(I(),z(g[n],1,1,(()=>{g[n]=null})),H(),r=g[o],r?r.p(t,e):(r=g[o]=v[o](t),r.c()),S(r,1),r.m(i,null))},i(t){c||(S(r),c=!0)},o(t){z(r),c=!1},d(t){t&&d(e),g[o].d(),u=!1,m()}}}function lt(t){let e,n;return e=new rt({}),{c(){j(e.$$.fragment)},m(t,i){F(e,t,i),n=!0},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function pt(t){let e,n;return e=new ct({props:{size:"16",color:"#fff"}}),{c(){j(e.$$.fragment)},m(t,i){F(e,t,i),n=!0},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){z(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function dt(t){let e,n,i=t[0]&&ut(t);return{c(){i&&i.c(),e=v()},m(t,o){i&&i.m(t,o),p(t,e,o),n=!0},p(t,[n]){t[0]?i?(i.p(t,n),1&n&&S(i,1)):(i=ut(t),i.c(),S(i,1),i.m(e.parentNode,e)):i&&(I(),z(i,1,1,(()=>{i=null})),H())},i(t){n||(S(i),n=!0)},o(t){z(i),n=!1},d(t){i&&i.d(t),t&&d(e)}}}function ft(t,e,n){let{game:i}=e,{id:o}=e,{isImage:r}=e,{url:s}=e,a=!1;const c=new Q({duration:1e4,position:{x:"center",y:"bottom"},types:[{type:"error",className:"notification"},{type:"success",className:"notification"}]});return t.$$set=t=>{"game"in t&&n(3,i=t.game),"id"in t&&n(0,o=t.id),"isImage"in t&&n(4,r=t.isImage),"url"in t&&n(5,s=t.url)},[o,a,async()=>{n(1,a=!0),chrome.runtime.sendMessage({game:i,id:o,isImage:r,url:s},(function(t){if(t.errors)c.error("You've already uploaded this!");else{c.success("Uploaded! Click here to view or edit").on("click",(()=>{window.location.href=t.url}))}n(1,a=!1)}))},i,r,s]}class mt extends q{constructor(t){super(),B(this,t,ft,dt,s,{game:3,id:0,isImage:4,url:5})}}let ht={};new MutationObserver((function(t,e){t.forEach((t=>{if("childList"===t.type){const e=Array.from(t.addedNodes).find((t=>t&&t.querySelector&&t.querySelector("[data-capture-id]")));if(e){console.log(ht);const t=e.querySelector(".google-material-icons").parentElement.parentElement.parentElement,n=e.querySelector("[data-capture-id]"),i=t.children[1],o=document.createElement("div");i.prepend(o),console.log(n),console.log(n.dataset.captureId),new mt({target:o,props:ht[n.dataset.captureId]})}}}))})).observe(document,{attributes:!0,childList:!0,subtree:!0}),document.addEventListener("update-captures",(t=>{ht=t.detail}));chrome.storage.sync.get(["clipiaKey"],(t=>{console.log(t)}));const vt=document.createElement("script");vt.textContent=`(${(()=>{const t="CmnEcf";const e=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(n=null){this.addEventListener("load",(()=>{const e=new URL(this.responseURL).searchParams.get("rpcids");if(e&&e.includes(t)){const e=function(e){let n=0;for(;;){const o=e.indexOf("[",n);if(-1==o)break;const r=e.indexOf("\n]\n",o);if(-1==r)return[];var i=JSON.parse(e.substring(o,r+2));if(i[0][1]===t)return JSON.parse(i[0][2]);n=r+1}}(this.response),n={};e[0].forEach((t=>{const e=t[1],i=t[3],o=null===t[8],r=o?t[7][1]:t[8][1];n[e]={id:e,game:i,isImage:o,url:r}})),console.log(n),window.captures=n;const i=new CustomEvent("update-captures",{detail:n});document.dispatchEvent(i)}})),e.apply(this,[n])}}).toString()})()`,(document.head||document.documentElement).prepend(vt)}));
//# sourceMappingURL=bundle.js.map
